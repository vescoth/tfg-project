<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFG Veselin A-Frame</title>
    <!-- <script src="./medirModelos.js"></script> -->
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script type="module" src="./a_components.js"></script>
    <!-- <script type="module" src="./medirModelos.js"></script> -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
</head>

<body>
    <a-scene id="scene">
        <a-assets>
            <img id="textura-sky" src="./texturas/sky.jpg" />
            <!-- Modelos glb pasar por model-viewer https://modelviewer.dev/editor/ -->
            <a-asset-item id="dinosaurio" src="./Modelos/dinosaurio.glb"></a-asset-item>
            <a-asset-item id="drone" src="./Modelos/dron.glb"></a-asset-item>
            <a-asset-item id="bee" src="./Modelos/abeja.glb"></a-asset-item>
            <a-asset-item id="boton" src="./Modelos/boton.glb"></a-asset-item>
            <a-asset-item id="fluido" src="./Modelos/fluido.glb"></a-asset-item>
            <a-asset-item id="coche" src="./Modelos/coche.glb"></a-asset-item>
            <a-asset-item id="fenix" src="./Modelos/fenix.glb"></a-asset-item>
            <a-asset-item id="cd" src="./Modelos/cd.glb"></a-asset-item>
            <a-asset-item id="basura" src="./Modelos/basura.glb"></a-asset-item>
            <a-asset-item id="cofre" src="./Modelos/cofre.glb"></a-asset-item>
            <a-asset-item id="piedra" src="./Modelos/piedra.glb"></a-asset-item>
            <a-asset-item id="madera" src="./Modelos/madera.glb"></a-asset-item>
            <a-asset-item id="casa-arbol" src="./Modelos/casa-arbol.glb"></a-asset-item>
            <a-asset-item id="banco" src="./Modelos/banco.glb"></a-asset-item>
            <a-asset-item id="lampara" src="./Modelos/lampara.glb"></a-asset-item>
            <a-asset-item id="ventana" src="./Modelos/ventana.glb"></a-asset-item>
            <a-asset-item id="antorcha" src="./Modelos/antorcha.glb"></a-asset-item>
            <a-asset-item id="hierba" src="./Modelos/hierba.glb"></a-asset-item>
        </a-assets>

        <a-entity id="welcomePanel" position="0 2 -3" visible="true" draggable="">
            <!-- Fondo del panel -->
            <a-plane width="2.8" height="4.3" color="#222" opacity="0.9" class="clickable"
                onclick="event.stopPropagation();" position="0 0.6 0"></a-plane>

            <!-- Texto de bienvenida -->
            <a-text value='Bienvenido a Habla y Crea.\n
                        En esta herramienta podras crear y editar modelos 3D usando tu voz, con ayuda de Gemma, la asistente virtual.\n
                        Â¿Como empezar?\n
                        - Pulsa el boton central para generar un ferrofluido.\n
                        - Coloca el cursor amarillo sobre el.\n
                        - Manten pulsado el boton (clic o pinch) y habla.\n
                        - Di cosas como: "Quiero un dinosaurio, Gemma."\n
                        - Suelta y espera confirmacion.\n
                        \n
                        Ejemplos de comandos:\n
                        - "Gemma, hazlo mas grande."\n
                        - "Gemma, giralo 180 grados."\n
                        - "Gemma, quiero tres copias mÃ¡s."\n
                        \n
                        El boton derecho borra toda la escena.
                        \n
                        El boton izquierdo descarga la escena actual para cargarla mas tarde metiendo el archivo descargado en el directorio principal del proyecto.\n
                        \n
                        ðŸ”Š Recuerda: Si no mencionas a Gemma, el comando no se ejecutara.\n
                        \n
                        Modelos disponibles: Dinosaurio, dron, abeja, boton, coche, fenix, cofre, casa arbol, piedra, banco, lampara, ventana, antorcha y hierba.
                        \n
                        Creador: Veselin Todorov Hristov
                        \n
                        TFG Univerdidad Rey Juan Carlos 2024-2025' width="2.5" color="#00FFFF" position="-1.35 0.6 0"
                line-height="30"></a-text>

            <!-- BotÃ³n de cerrar -->
            <a-plane id="closePanelBtn" position="1.25 2.6 0.01" width="0.25" height="0.25" color="#ff3333"
                class="clickable" draggable="">
                <a-text value="X" color="#fff" position="-0.03 0 0" width="2"></a-text>
            </a-plane>
        </a-entity>

        <a-entity creador-ui></a-entity>
        <a-sky src="#textura-sky"></a-sky>


        <!-- Luz -->
        <a-light type="directional" intensity="1" position="-3 7 10"></a-light>
        <a-light type="ambient" intensity="1"></a-light>

        <!-- Suelo -->
        <a-entity geometry="primitive: circle; radius: 100;" material="src: url(./texturas/floor.jpg); repeat: 100 100"
            position="0 0 0" rotation="-90 0 0" static-body>
        </a-entity>

        <!-- CÃ¡mara -->
        <a-entity id="camera" camera wasd-controls camera-height-control look-controls="pointerLockEnabled: true;"
            position="0 2 3">
            <a-entity id="gaze-cursor" cursor="rayOrigin: entity" raycaster="objects: .clickable" position="0 0 -1"
                geometry="primitive: ring; radiusInner: 0.003; radiusOuter: 0.0050"
                material="color: yellow; shader: flat">
            </a-entity>
        </a-entity>
    </a-scene>
    <script>
        AFRAME.scenes[0].addEventListener('loaded', function () {
            const camera = document.querySelector('#camera');
            camera.setAttribute('rotation', '0 180 0');
        });
    </script>
</body>

</html>